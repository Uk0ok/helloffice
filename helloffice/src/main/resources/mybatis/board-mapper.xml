<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="board">
	<select id="getPostList" resultType="post">
		SELECT  P.*,
				H.EMP_NAME,
				B.BOARD_NAME
		FROM POST P
		INNER JOIN BOARD B
			ON P.BOARD_NO = B.BOARD_NO
		INNER JOIN HR H
			ON P.EMP_NO = H.EMP_NO
		WHERE P.BOARD_NO = #{boardNo} 
		AND P.IS_DELETED = 'N'
	</select>
	
	<insert id="insertPost">
		INSERT INTO POST(
			POST_NO,
			EMP_NO,
			BOARD_NO,
			TITLE,
			CATEGORY,
			CONTENT
		)
		VALUES(
			POST_SEQ.NEXTVAL,
			#{empNo},
			#{boardNo},
			#{title},
			#{category},
			#{content}
		)
	</insert>
	
	<select id="getPost" resultType="post">
		SELECT  P.*,
				H.EMP_NAME,
				B.BOARD_NAME
		FROM POST P
		INNER JOIN BOARD B
			ON P.BOARD_NO = B.BOARD_NO
		INNER JOIN HR H
			ON P.EMP_NO = H.EMP_NO
		WHERE POST_NO = #{no} 
	</select>
</mapper>
