<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="off">
	
	<!-- 휴가 생성 전체 목록 조회 -->
	<select id="adminListAll" resultType="offDto">
		SELECT *
		FROM OFF
	</select>
	
	<!-- 휴가 생성 -->
	<insert id="insert">
		INSERT INTO OFF(
			 OFF_NO
			,EMP_NO
			,DEP_NAME
			,OFF_TYPE
			,OFF_PAY
			,OFF_OX
			,OFF_START
			,OFF_END
			,OFF_DAY
			,OFF_CONTENT
		)VALUES(
			OFF_SEQ.nextval
			,#{empNo}
			,#{depName}
			,#{offType}
			,#{offPay}
			,DEFAULT
			,#{offStart}
			,#{offEnd}
			,DEFAULT
			,#{offContent}
		)
	</insert>
	
	<!-- 휴가 상세보기 조회 -->
	<select id="view" resultType="offDto">
		SELECT * FROM OFF
		WHERE OFF_NO = #{offNo}
	</select>
	
	<!-- 휴가 조회수 증가 -->
	<!-- <update id="increaseViewcnt">
		UPDATE OFF SET VIEWCNT = VIEWCNT + 1
		WHERE OFF_NO = #{offNo}
	</update>
	 -->
	 
	 <!-- 휴가 수정 -->
	 <update id="updateArticle">
	 	UPDATE OFF SET
	 		EMP_NO 		= #{empNo}
			,DEP_NAME 	= #{depName}
			,OFF_TYPE 	= #{offType}
			,OFF_PAY	= #{offPay}
			,OFF_OX 	= #{offOx}
			,OFF_START  = #{offStart}
			,OFF_END	= #{offEnd}
			,OFF_CONTENT= #{offContent}
	 	WHERE OFF_NO = #{offNo}
	 </update>
	 
	 <!-- 휴가 삭제 -->
	 <delete id="deleteArticle">
	 DELETE FROM OFF
	 WHERE OFF_NO = #{offNo}
	 </delete>
	 
</mapper>
